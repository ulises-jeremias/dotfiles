#!/usr/bin/env bash

## Copyright (C) 2019-2025 Ulises Jeremias Cornejo Fandos
## Licensed under MIT.
##
## Check full documentation at: https://github.com/ulises-jeremias/dotfiles/wiki
##
## Check if the network is up

set -euo pipefail

wdisconnect="睊"
wconnected="直"
econnected=""
edisconnect=""

network_interface="$(ip link 2>/dev/null | awk '/state UP/ {print $2}' || echo "")"

while true; do
  if ping -c 1 google.com >/dev/null 2>&1; then
    [[ $network_interface == e* ]] && echo "$econnected" || echo "$wconnected"
    sleep 25
  else
    [[ $network_interface == e* ]] && echo "$edisconnect" || echo "$wdisconnect"
    sleep 0.6
  fi
done
