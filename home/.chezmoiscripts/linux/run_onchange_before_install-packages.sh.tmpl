{{ if eq .osid "linux-arch" -}}
#!/usr/bin/env bash

set -eufo pipefail

{{ $packages := list
  "bat"
  "btop"
  "copyq"
  "dbus-python"
  "direnv"
  "exa"
  "jq"
  "fastfetch"
  "github-cli"
  "gnome-keyring"
  "pacman-contrib"
  "python"
  "python-pip"
  "python-pipx"
  "shellcheck"
  "acpi"
  "upower"
  "brightnessctl"
  "grim"
  "slurp"
  "cliphist"
  "pavucontrol"
  "power-profiles-daemon"
-}}

{{ $aurPackages := list
  "cava"
  "auto-cpufreq"
  "safeeyes"
-}}

{{ if and (not .ephemeral) (not .headless) -}}
{{ $packages = concat $packages (list
  "arandr"
  "flameshot"
  "graphicsmagick"
  "orchis-theme"
  "xdg-desktop-portal"
  "xdg-desktop-portal-hyprland"
  "pamixer"
  "playerctl"
  "pipewire-pulse"
  "python-pywayland"
  "sxiv"
  "w3m"
  "wmctrl"
  "yad"
  "hyprlock"
  "hypridle"
  "lxqt-config"
) -}}

{{ $aurPackages = concat $aurPackages (list
  "numix-circle-icon-theme-git"
  "pamac-aur"
  "pwvucontrol"
  "snappy-switcher"
  "poweralertd"
) -}}
{{ end -}}

{{ $sudo := "sudo " -}}
{{ if eq .chezmoi.username "root" -}}
{{   $sudo = "" -}}
{{ end -}}

{{ $sudo }}pacman -S --noconfirm --needed {{ $packages | join " " }}

yay -S --noconfirm --needed {{ $aurPackages | join " " }}

{{ end -}}
