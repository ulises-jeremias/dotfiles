# ============================================================================
# Additional Keybindings from i3 Configuration
# ============================================================================
#
# These bindings were missing from the original Hyprland config
# Source them in hyprland.conf with: source = ~/.config/hypr/hyprland.conf.d/keybindings-i3-compat.conf
# ============================================================================

$mainMod = SUPER

# ============================================================================
# i3 Compatibility - Missing Bindings
# ============================================================================

# Clipboard manager (rofi-run)
bind = ALT CTRL, C, exec, ~/.local/bin/dots rofi-run -c

# IBus engine switcher (for sgpt)
bind = $mainMod CTRL, Space, exec, ibus engine shin

# Focus mode toggle (floating <-> tiled)
bind = $mainMod SHIFT, Space, focuscurrentorlast

# Smart floating (float + center + resize) - equivalent to i3's smart-float.sh
bind = $mainMod SHIFT, F, exec, hyprctl dispatch togglefloating && hyprctl dispatch centerwindow

# Move window to center
bind = $mainMod CTRL, C, centerwindow

# Focus parent (using changegroupactive as alternative)
bind = $mainMod, P, changegroupactive, f

# Focus child
bind = $mainMod, C, changegroupactive, b

# ============================================================================
# Numpad Workspace Switching
# ============================================================================

# Switch to workspace (numpad)
bind = $mainMod, KP_End, workspace, 1
bind = $mainMod, KP_Down, workspace, 2
bind = $mainMod, KP_Next, workspace, 3
bind = $mainMod, KP_Left, workspace, 4
bind = $mainMod, KP_Begin, workspace, 5
bind = $mainMod, KP_Right, workspace, 6
bind = $mainMod, KP_Home, workspace, 7
bind = $mainMod, KP_Up, workspace, 8
bind = $mainMod, KP_Prior, workspace, 9
bind = $mainMod, KP_Insert, workspace, 10

# Move window to workspace (numpad)
bind = $mainMod SHIFT, KP_End, movetoworkspace, 1
bind = $mainMod SHIFT, KP_Down, movetoworkspace, 2
bind = $mainMod SHIFT, KP_Next, movetoworkspace, 3
bind = $mainMod SHIFT, KP_Left, movetoworkspace, 4
bind = $mainMod SHIFT, KP_Begin, movetoworkspace, 5
bind = $mainMod SHIFT, KP_Right, movetoworkspace, 6
bind = $mainMod SHIFT, KP_Home, movetoworkspace, 7
bind = $mainMod SHIFT, KP_Up, movetoworkspace, 8
bind = $mainMod SHIFT, KP_Prior, movetoworkspace, 9
bind = $mainMod SHIFT, KP_Insert, movetoworkspace, 10

# ============================================================================
# Workspace Navigation
# ============================================================================

# Navigate to previous/next active workspace (i3: workspace prev/next)
bind = $mainMod ALT, left, workspace, e-1
bind = $mainMod ALT, right, workspace, e+1

# Navigate to previous/next existing workspace (using dots next-workspace)
bind = $mainMod CTRL, left, exec, ~/.local/bin/dots next-workspace --left
bind = $mainMod CTRL, right, exec, ~/.local/bin/dots next-workspace

# ============================================================================
# Scratchpad (Special Workspace)
# ============================================================================

# Toggle scratchpad (i3: scratchpad show)
bind = $mainMod, Z, togglespecialworkspace, magic

# Move to scratchpad (i3: move scratchpad)
bind = $mainMod SHIFT, Z, movetoworkspace, special:magic

# ============================================================================
# Layout Management
# ============================================================================

# Split horizontal hint
bind = $mainMod ALT, H, layoutmsg, preselect l

# Split vertical hint
bind = $mainMod ALT, V, layoutmsg, preselect d

# Toggle split direction
bind = $mainMod, V, togglesplit

# Tabbed/stacking mode (using groups)
bind = $mainMod SHIFT, T, togglegroup
bind = $mainMod SHIFT, S, togglegroup

# Horizontal split (i3 compatibility)
bind = $mainMod SHIFT, H, togglesplit

# Layout cycle (Alt+Tab for window cycling)
bind = ALT, Tab, cyclenext
bind = ALT SHIFT, Tab, cyclenext, prev

# ============================================================================
# Gaps Management (i3-gaps style)
# ============================================================================

# Increase/decrease inner gaps
bind = $mainMod ALT, equal, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in -j | jq -r '.int') + 5))
bind = $mainMod ALT, minus, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in -j | jq -r '.int') - 5))
bind = $mainMod ALT, 0, exec, hyprctl keyword general:gaps_in 12

# Increase/decrease outer gaps
bind = $mainMod SHIFT ALT, equal, exec, hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out -j | jq -r '.int') + 5))
bind = $mainMod SHIFT ALT, minus, exec, hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out -j | jq -r '.int') - 5))
bind = $mainMod SHIFT ALT, 0, exec, hyprctl keyword general:gaps_out 18

# Interactive gaps mode (requires custom script)
bind = $mainMod, G, exec, ~/.config/hypr/scripts/gaps-interactive.sh

# ============================================================================
# Border Management
# ============================================================================

# Toggle borders
bind = $mainMod SHIFT, B, exec, hyprctl keyword general:border_size $(($(hyprctl getoption general:border_size -j | jq -r '.int') == 0 ? 2 : 0))

# Normal border (2px)
bind = $mainMod, N, exec, hyprctl keyword general:border_size 2

# No border
bind = $mainMod, U, exec, hyprctl keyword general:border_size 0

# Thin border (1px)
bind = $mainMod, Y, exec, hyprctl keyword general:border_size 1

# ============================================================================
# System & Utilities
# ============================================================================

# Reload config (i3: reload)
bind = $mainMod SHIFT, C, exec, hyprctl reload

# Toggle waybar (i3: toggle polybar)
bind = $mainMod CTRL, P, exec, pkill -SIGUSR1 waybar || ~/.config/waybar/launch.sh

# Task switcher (rofi window mode as skippy-xd alternative)
bind = $mainMod SHIFT, Tab, exec, rofi -show window

# Volume control (1% increments to match i3)
bindle = , XF86AudioRaiseVolume, exec, pamixer -i 1
bindle = , XF86AudioLowerVolume, exec, pamixer -d 1
