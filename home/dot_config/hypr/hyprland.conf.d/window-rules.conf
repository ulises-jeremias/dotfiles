# ============================================================================
# Window Rules
# ============================================================================
#
# Format: windowrulev2 = RULE, CRITERIA
#
# Common rules:
# - float
# - tile
# - fullscreen
# - maximize
# - pin
# - workspace
# - opacity
# - animation
# - size
# - move
# - center
#
# Common criteria:
# - class
# - title
# - initialClass
# - initialTitle
# ============================================================================

# ============================================================================
# Float Rules
# ============================================================================

# System utilities
# Audio control (matches both pavucontrol and org.pulseaudio.pavucontrol)
windowrulev2 = float, class:.*pavucontrol.*
windowrulev2 = center, class:.*pavucontrol.*
windowrulev2 = size 40% 50%, class:.*pavucontrol.*
# PipeWire audio control
windowrulev2 = float, class:.*pwvucontrol.*
windowrulev2 = center, class:.*pwvucontrol.*
windowrulev2 = size 40% 50%, class:.*pwvucontrol.*
# Bluetooth manager
windowrulev2 = float, class:.*blueman.*
windowrulev2 = center, class:.*blueman.*
windowrulev2 = size 40% 50%, class:.*blueman.*
# Network manager
windowrulev2 = float, class:.*nm-connection-editor.*
windowrulev2 = center, class:.*nm-connection-editor.*
windowrulev2 = size 40% 50%, class:.*nm-connection-editor.*
# Calculator
windowrulev2 = float, class:.*calculator.*
windowrulev2 = center, class:.*calculator.*

# Wallpaper manager (wpgtk)
windowrulev2 = float, class:.*[Ww]pg.*
windowrulev2 = center, class:.*[Ww]pg.*
windowrulev2 = size 40% 50%, class:.*[Ww]pg.*

# Community GUI tools (new)
# Clipboard manager
windowrulev2 = float, class:.*copyq.*
windowrulev2 = center, class:.*copyq.*
windowrulev2 = size 35% 50%, class:.*copyq.*
# Launchers
windowrulev2 = float, class:.*fuzzel.*
windowrulev2 = float, class:.*wofi.*
# nwg-look (GTK theme editor)
windowrulev2 = float, class:.*nwg-look.*
windowrulev2 = center, class:.*nwg-look.*
windowrulev2 = size 50% 60%, class:.*nwg-look.*
# nwg-displays
windowrulev2 = float, class:.*nwg-displays.*
windowrulev2 = center, class:.*nwg-displays.*
windowrulev2 = size 60% 70%, class:.*nwg-displays.*
# nwg-bar
windowrulev2 = float, class:.*nwg-bar.*
windowrulev2 = size 30% 40%, class:.*nwg-bar.*
# nwg-drawer
windowrulev2 = float, class:.*nwg-drawer.*
windowrulev2 = size 40% 60%, class:.*nwg-drawer.*
# Auto CPU frequency GUI
windowrulev2 = float, class:.*auto-cpufreq.*
windowrulev2 = center, class:.*auto-cpufreq.*
windowrulev2 = size 40% 50%, class:.*auto-cpufreq.*
# wlogout
windowrulev2 = float, title:.*wlogout.*

# GTK theme and appearance tools
windowrulev2 = float, class:.*lxappearance.*
windowrulev2 = center, class:.*lxappearance.*
windowrulev2 = size 50% 60%, class:.*lxappearance.*

# Display configuration tools
windowrulev2 = float, class:.*arandr.*
windowrulev2 = center, class:.*arandr.*
windowrulev2 = size 60% 70%, class:.*arandr.*

# LXQt configuration tools
windowrulev2 = float, class:.*lxqt-config.*
windowrulev2 = center, class:.*lxqt-config.*
windowrulev2 = size 60% 70%, class:.*lxqt-config.*
windowrulev2 = float, class:.*lxqt-config-input.*
windowrulev2 = center, class:.*lxqt-config-input.*
windowrulev2 = size 45% 55%, class:.*lxqt-config-input.*
windowrulev2 = float, class:.*lxqt-config-monitor.*
windowrulev2 = center, class:.*lxqt-config-monitor.*
windowrulev2 = size 60% 70%, class:.*lxqt-config-monitor.*
windowrulev2 = float, class:.*lxqt-config-appearance.*
windowrulev2 = center, class:.*lxqt-config-appearance.*
windowrulev2 = size 50% 60%, class:.*lxqt-config-appearance.*

# File managers (dialogs)
windowrulev2 = float, title:^(File Operation Progress)$
windowrulev2 = center, title:^(File Operation Progress)$
windowrulev2 = float, title:^(Confirm to replace files)$
windowrulev2 = center, title:^(Confirm to replace files)$
windowrulev2 = float, class:^(thunar)$, title:^(Bulk Rename)$
windowrulev2 = center, class:^(thunar)$, title:^(Bulk Rename)$

# System monitors
windowrulev2 = float, class:^(btop)$
windowrulev2 = center, class:^(btop)$
windowrulev2 = float, class:^(htop)$
windowrulev2 = center, class:^(htop)$

# Picture-in-Picture
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = size 25% 25%, title:^(Picture-in-Picture)$
windowrulev2 = move 72% 72%, title:^(Picture-in-Picture)$

# Rofi
windowrulev2 = float, class:^(Rofi)$
windowrulev2 = stayfocused, class:^(Rofi)$
windowrulev2 = animation slide, class:^(Rofi)$
windowrulev2 = noshadow, class:^(Rofi)$
windowrulev2 = rounding 0, class:^(Rofi)$

# Fuzzel/Wofi launchers
windowrulev2 = stayfocused, class:.*fuzzel.*
windowrulev2 = animation slide, class:.*fuzzel.*
windowrulev2 = stayfocused, class:.*wofi.*
windowrulev2 = animation slide, class:.*wofi.*

# CopyQ clipboard manager
windowrulev2 = center, class:.*copyq.*
windowrulev2 = stayfocused, class:.*copyq.*
windowrulev2 = animation popin, class:.*copyq.*

# nwg-bar power menu
windowrulev2 = center, class:.*nwg-bar.*
windowrulev2 = stayfocused, class:.*nwg-bar.*
windowrulev2 = animation popin, class:.*nwg-bar.*

# wlogout power menu
windowrulev2 = center, title:^(wlogout)$
windowrulev2 = stayfocused, title:^(wlogout)$
# EWW Widgets
windowrulev2 = float, class:^(eww)$
windowrulev2 = nofocus, class:^(eww)$, title:^(eww-background)$
windowrulev2 = noshadow, class:^(eww)$
windowrulev2 = rounding 0, class:^(eww)$

# Notification daemon
windowrulev2 = float, class:^(mako)$
windowrulev2 = nofocus, class:^(mako)$
windowrulev2 = noshadow, class:^(mako)$
windowrulev2 = rounding 0, class:^(mako)$

# ============================================================================
# Focus Enhancement Rules
# ============================================================================

# Note: Shadow enhancement for floating windows is handled globally
# in decoration.shadow settings. Individual window shadow rules are not
# supported in Hyprland - use noshadow to disable shadows for specific windows.

# ============================================================================
# Opacity Rules
# ============================================================================

# Terminals
windowrulev2 = opacity 0.95 0.85, class:^(kitty)$
windowrulev2 = opacity 0.95 0.85, class:^(Alacritty)$

# Community GUI tools
windowrulev2 = opacity 0.96 0.92, class:.*copyq.*
windowrulev2 = opacity 0.96 0.92, class:.*nwg-look.*
windowrulev2 = opacity 0.96 0.92, class:.*nwg-displays.*
windowrulev2 = opacity 0.96 0.92, class:.*auto-cpufreq.*
windowrulev2 = opacity 0.96 0.92, class:.*pwvucontrol.*
windowrulev2 = opacity 0.96 0.92, class:.*pavucontrol.*
windowrulev2 = opacity 0.96 0.92, class:.*[Ww]pg.*

# GTK theme and appearance tools
windowrulev2 = opacity 0.96 0.92, class:.*lxappearance.*

# Display configuration tools
windowrulev2 = opacity 0.96 0.92, class:.*arandr.*

# LXQt configuration tools
windowrulev2 = opacity 0.96 0.92, class:.*lxqt-config.*

# File managers
windowrulev2 = opacity 0.95 0.90, class:^(thunar)$
windowrulev2 = opacity 0.95 0.90, class:^(nautilus)$
windowrulev2 = opacity 0.95 0.90, class:^(dolphin)$

# Code editors
windowrulev2 = opacity 0.98 0.95, class:^(Code)$
windowrulev2 = opacity 0.98 0.95, class:^(code-url-handler)$

# Discord
windowrulev2 = opacity 0.95 0.90, class:^(discord)$
windowrulev2 = opacity 0.95 0.90, class:^(vesktop)$

# ============================================================================
# Workspace Rules
# ============================================================================

# Browsers
windowrulev2 = workspace 1 silent, class:^(firefox)$
windowrulev2 = workspace 1 silent, class:^(chromium)$
windowrulev2 = workspace 1 silent, class:^(google-chrome)$

# Development
windowrulev2 = workspace 2 silent, class:^(Code)$
windowrulev2 = workspace 2 silent, class:^(code-url-handler)$

# Communication
windowrulev2 = workspace 3 silent, class:^(discord)$
windowrulev2 = workspace 3 silent, class:^(vesktop)$
windowrulev2 = workspace 3 silent, class:^(Slack)$
windowrulev2 = workspace 3 silent, class:^(telegram-desktop)$

# Media
windowrulev2 = workspace 4 silent, class:^(spotify)$
windowrulev2 = workspace 4 silent, class:^(Spotify)$

# ============================================================================
# Size and Position Rules
# ============================================================================

# JGMenu - don't center, it handles positioning itself
windowrulev2 = noborder, class:^(jgmenu)$
windowrulev2 = noanim, class:^(jgmenu)$

# Center floating windows - DISABLED for jgmenu and eww compatibility
# Instead, specific windows that need centering are centered individually below
# windowrulev2 = center, floating:1

# Note: Size rules are now defined immediately after float/center rules for each application
# This ensures proper application order and better compatibility

# ============================================================================
# Animation Rules
# ============================================================================

# Smooth animations for specific apps
windowrulev2 = animation popin, class:^(Rofi)$
windowrulev2 = animation slide, class:^(eww)$

# ============================================================================
# Tiling Rules
# ============================================================================

# Force tile some applications
windowrulev2 = tile, class:^(Spotify)$
windowrulev2 = tile, class:^(spotify)$

# ============================================================================
# Fullscreen Rules
# ============================================================================

# Games
windowrulev2 = fullscreen, class:^(steam_app).*
windowrulev2 = immediate, class:^(steam_app).*
windowrulev2 = workspace special:games silent, class:^(steam_app).*

# ============================================================================
# Special Rules
# ============================================================================

# Inhibit idle for media players
windowrulev2 = idleinhibit always, class:^(mpv)$
windowrulev2 = idleinhibit always, class:^(vlc)$
windowrulev2 = idleinhibit focus, class:^(firefox)$, title:^(.*YouTube.*)$

# Disable blur for performance
windowrulev2 = noblur, class:^(steam_app).*

# Flameshot - Multi-monitor fix for Wayland
# See: https://github.com/flameshot-org/flameshot/blob/master/docs/Sway%20and%20wlroots%20support.md
windowrulev2 = float, class:^(flameshot)$, title:^(flameshot)$
windowrulev2 = move 0 0, class:^(flameshot)$, title:^(flameshot)$
windowrulev2 = pin, class:^(flameshot)$, title:^(flameshot)$
windowrulev2 = fullscreenstate 0, class:^(flameshot)$, title:^(flameshot)$
windowrulev2 = noanim, class:^(flameshot)$, title:^(flameshot)$
windowrulev2 = noinitialfocus, class:^(flameshot)$, title:^(flameshot)$
windowrulev2 = stayfocused, class:^(flameshot)$, title:^(flameshot)$

# XWayland video bridge
windowrulev2 = opacity 0.0 override 0.0 override, class:^(xwaylandvideobridge)$
windowrulev2 = noanim, class:^(xwaylandvideobridge)$
windowrulev2 = nofocus, class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus, class:^(xwaylandvideobridge)$

# ============================================================================
# Layer Rules
# ============================================================================

# Waybar
layerrule = blur, waybar
layerrule = ignorezero, waybar

# Notifications
layerrule = blur, notifications
layerrule = ignorezero, notifications

# Rofi
layerrule = blur, rofi
layerrule = ignorezero, rofi

# EWW
layerrule = blur, eww
layerrule = ignorezero, eww
