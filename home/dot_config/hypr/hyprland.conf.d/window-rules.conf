# ============================================================================
# Window Rules
# ============================================================================
#
# Format: windowrulev2 = RULE, CRITERIA
#
# Common rules:
# - float
# - tile
# - fullscreen
# - maximize
# - pin
# - workspace
# - opacity
# - animation
# - size
# - move
# - center
#
# Common criteria:
# - class
# - title
# - initialClass
# - initialTitle
# ============================================================================

# ============================================================================
# Float Rules
# ============================================================================

# System utilities
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(gnome-calculator)$

# File managers (dialogs)
windowrulev2 = float, title:^(File Operation Progress)$
windowrulev2 = float, title:^(Confirm to replace files)$
windowrulev2 = float, class:^(thunar)$, title:^(Bulk Rename)$

# System monitors
windowrulev2 = float, class:^(btop)$
windowrulev2 = float, class:^(htop)$

# Picture-in-Picture
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = size 25% 25%, title:^(Picture-in-Picture)$
windowrulev2 = move 72% 72%, title:^(Picture-in-Picture)$

# Rofi
windowrulev2 = float, class:^(Rofi)$
windowrulev2 = stayfocused, class:^(Rofi)$
windowrulev2 = animation slide, class:^(Rofi)$

# EWW Widgets
windowrulev2 = float, class:^(eww)$
windowrulev2 = nofocus, class:^(eww)$, title:^(eww-background)$

# Notification daemon
windowrulev2 = float, class:^(mako)$
windowrulev2 = nofocus, class:^(mako)$

# ============================================================================
# Opacity Rules
# ============================================================================

# Terminals
windowrulev2 = opacity 0.95 0.85, class:^(kitty)$
windowrulev2 = opacity 0.95 0.85, class:^(Alacritty)$

# File managers
windowrulev2 = opacity 0.95 0.90, class:^(thunar)$
windowrulev2 = opacity 0.95 0.90, class:^(nautilus)$
windowrulev2 = opacity 0.95 0.90, class:^(dolphin)$

# Code editors
windowrulev2 = opacity 0.98 0.95, class:^(Code)$
windowrulev2 = opacity 0.98 0.95, class:^(code-url-handler)$

# Discord
windowrulev2 = opacity 0.95 0.90, class:^(discord)$
windowrulev2 = opacity 0.95 0.90, class:^(vesktop)$

# ============================================================================
# Workspace Rules
# ============================================================================

# Browsers
windowrulev2 = workspace 1 silent, class:^(firefox)$
windowrulev2 = workspace 1 silent, class:^(chromium)$
windowrulev2 = workspace 1 silent, class:^(google-chrome)$

# Development
windowrulev2 = workspace 2 silent, class:^(Code)$
windowrulev2 = workspace 2 silent, class:^(code-url-handler)$

# Communication
windowrulev2 = workspace 3 silent, class:^(discord)$
windowrulev2 = workspace 3 silent, class:^(vesktop)$
windowrulev2 = workspace 3 silent, class:^(Slack)$
windowrulev2 = workspace 3 silent, class:^(telegram-desktop)$

# Media
windowrulev2 = workspace 4 silent, class:^(spotify)$
windowrulev2 = workspace 4 silent, class:^(Spotify)$

# ============================================================================
# Size and Position Rules
# ============================================================================

# Center floating windows
windowrulev2 = center, floating:1

# Specific application sizes
windowrulev2 = size 60% 70%, class:^(pavucontrol)$
windowrulev2 = size 50% 60%, class:^(blueman-manager)$
windowrulev2 = size 40% 50%, class:^(nm-connection-editor)$

# ============================================================================
# Animation Rules
# ============================================================================

# Smooth animations for specific apps
windowrulev2 = animation popin, class:^(Rofi)$
windowrulev2 = animation slide, class:^(eww)$

# ============================================================================
# Tiling Rules
# ============================================================================

# Force tile some applications
windowrulev2 = tile, class:^(Spotify)$
windowrulev2 = tile, class:^(spotify)$

# ============================================================================
# Fullscreen Rules
# ============================================================================

# Games
windowrulev2 = fullscreen, class:^(steam_app).*
windowrulev2 = immediate, class:^(steam_app).*
windowrulev2 = workspace special:games silent, class:^(steam_app).*

# ============================================================================
# Special Rules
# ============================================================================

# Inhibit idle for media players
windowrulev2 = idleinhibit always, class:^(mpv)$
windowrulev2 = idleinhibit always, class:^(vlc)$
windowrulev2 = idleinhibit focus, class:^(firefox)$, title:^(.*YouTube.*)$

# Disable blur for performance
windowrulev2 = noblur, class:^(steam_app).*

# XWayland video bridge
windowrulev2 = opacity 0.0 override 0.0 override, class:^(xwaylandvideobridge)$
windowrulev2 = noanim, class:^(xwaylandvideobridge)$
windowrulev2 = nofocus, class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus, class:^(xwaylandvideobridge)$

# ============================================================================
# Layer Rules
# ============================================================================

# Waybar
layerrule = blur, waybar
layerrule = ignorezero, waybar

# Notifications
layerrule = blur, notifications
layerrule = ignorezero, notifications

# Rofi
layerrule = blur, rofi
layerrule = ignorezero, rofi

# EWW
layerrule = blur, eww
layerrule = ignorezero, eww
