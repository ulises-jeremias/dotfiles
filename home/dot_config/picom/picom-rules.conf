rules: (
    # Per window type rules
    {
        match = "window_type = 'dropdown_menu'";
        shadow = false;
        corner-radius = 0;
    },

    {
        match = "window_type = 'popup_menu'";
        shadow = false;
        corner-radius = 0;
    },

    {
        match = "window_type = 'popup'";
        shadow = false;
        corner-radius = 0;
    },

    {
        match = "window_type = 'dock'";
        shadow = false;
        corner-radius = 0;
        fade = true;
    },

    {
        match = "window_type = 'tooltip'";
        shadow = false;
        corner-radius = 0;
        fade = false;
        opacity = 0.90;
        full-shadow = false;
    },

    {
        match = "window_type = 'splash'";
        shadow = false;
    },

    {
        match = "window_type = 'dialog'";
        shadow = false;
    },

    {
        match = "window_type = 'menu'";
        shadow = false;
        corner-radius = 0;
    },

    # Comprehensive shadow exclusion rules for UI elements
    {
        match = "name = 'Notification'		|| "
                "class_g ?= 'Notify-osd'	|| "
                "class_g = 'Dunst'			|| "
                "class_g = 'Polybar'		|| "
                "class_g = 'eww-bar'		|| "
                "class_g = 'eww-topbar'		|| "
                "class_g = 'eww-sidebar'	|| "
                "class_g = 'eww-dashboard'	|| "
                "class_g = 'eww-powermenu'	|| "
                "name = 'Eww - topbar'		|| "
                "name = 'Eww - sidebar'		|| "
                "name = 'Eww - dashboard'	|| "
                "name = 'Eww - powermenu'	|| "
                "name *= 'polybar'			|| "
                "name *= 'eww-bar'			|| "
                "name *= 'eww-topbar'		|| "
                "name *= 'eww-sidebar'		|| "
                "class_g = 'jgmenu'			|| "
                "class_g = 'scratch'		|| "
                "class_g = 'Spotify'		|| "
                "class_g = 'retroarch'		|| "
                "class_g = 'firefox'		|| "
                "class_g = 'Rofi'			|| "
                "class_g = 'Screenkey'		|| "
                "class_g = 'mpv'			|| "
                "class_g = 'Viewnior'		|| "
                "window_type = 'dock'		|| "
                "window_type = 'desktop'	|| "
                "window_type = 'tooltip'	|| "
                "window_type = 'popup_menu' || "
                "window_type = 'dropdown_menu' || "
                "_GTK_FRAME_EXTENTS@";
        shadow = false;
    },

    # Fading animation rules
    {
        match = "class_g = 'slop'		|| "
                "class_g = 'scratch'	|| "
                "class_g = 'firefox'";
        fade = false;
    },

    # Transparency for terminals depending on rice you are
    {
        match = "class_g = 'Alacritty'	|| "
                "class_g = 'kitty'		|| "
                "class_g = 'FloaTerm'";
        opacity = 1;
    },

    {
        match = "class_g = 'scratch'"; opacity = 0.95;
    },

    {
        match = "class_g = 'Updating'"; opacity = 0.95;
    },

    # Corner radius rules
    {
        match = "class_g = 'Polybar'	|| "
                "class_g = 'eww-bar'	|| "
                "class_g = 'eww-topbar'	|| "
                "class_g = 'eww-sidebar'	|| "
                "class_g = 'Viewnior'	|| "
                "class_g = 'Rofi'		|| "
                "class_g = 'mpv'		|| "
                "class_g = 'firefox'	|| "
                "class_g = 'scratch'	|| "
                "class_g = 'retroarch'";
        corner-radius = 0;
    },

    # Hyprland-inspired animations for NORMAL windows
    {
        match = "window_type = 'normal'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.05, 0.7, 0.1, 1.0)";
                    duration = 0.25;
                    start = 0;
                    end = "window-raw-opacity";
                };
                blur-opacity = "opacity";
                shadow-opacity = "opacity";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
                scale-x = {
                    curve = "cubic-bezier(0.175, 0.885, 0.32, 1.0)";
                    duration = 0.25;
                    start = 0.85;
                    end = 1;
                };
                scale-y = "scale-x";
                shadow-scale-x = "scale-x";
                shadow-scale-y = "scale-y";
                shadow-offset-x = "offset-x";
                shadow-offset-y = "offset-y";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.36, 0, 0.66, -0.56)";
                    duration = 0.18;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                blur-opacity = "opacity";
                shadow-opacity = "opacity";
                scale-x = {
                    curve = "cubic-bezier(0.36, 0, 0.66, -0.56)";
                    duration = 0.18;
                    start = 1;
                    end = 0.92;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
                shadow-scale-x = "scale-x";
                shadow-scale-y = "scale-y";
                shadow-offset-x = "offset-x";
                shadow-offset-y = "offset-y";
            },
            {
                triggers = ["geometry"];
                scale-x = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.3;
                    start = "window-width-before / window-width";
                    end = 1;
                };
                scale-y = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.3;
                    start = "window-height-before / window-height";
                    end = 1;
                };
                offset-x = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.3;
                    start = "window-x-before - window-x";
                    end = 0;
                };
                offset-y = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.3;
                    start = "window-y-before - window-y";
                    end = 0;
                };
                shadow-scale-x = "scale-x";
                shadow-scale-y = "scale-y";
                shadow-offset-x = "offset-x";
                shadow-offset-y = "offset-y";
            }
        )
    },

    # Hyprland-inspired animations for Rofi launcher - no shadows, no corners
    {
        match = "class_g = 'Rofi'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.15;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.15;
                    start = 0.8;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.1;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.1;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        );
        shadow = false;
        corner-radius = 0;
    },

    # Smooth animations for terminals (Kitty/Alacritty)
    {
        match = "class_g = 'kitty' || class_g = 'Alacritty'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 0.2, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                offset-y = {
                    curve = "cubic-bezier(0.4, 0, 0.2, 1)";
                    duration = 0.2;
                    start = "window-height * 0.1";
                    end = 0;
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 1, 1)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                offset-y = {
                    curve = "cubic-bezier(0.4, 0, 1, 1)";
                    duration = 0.15;
                    start = 0;
                    end = "window-height * 0.05";
                };
            }
        )
    },

    # Elegant animations for browsers
    {
        match = "class_g = 'firefox' || class_g = 'chromium' || class_g = 'Google-chrome' || class_g = 'Brave-browser'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.3;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.3;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.2;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.2;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        )
    },

    # Smooth animations for media players
    {
        match = "class_g = 'mpv' || class_g = 'vlc'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 0.6, 1)";
                    duration = 0.25;
                    start = 0;
                    end = "window-raw-opacity";
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 0.6, 1)";
                    duration = 0.2;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
            }
        )
    },

    # Fast animations for development tools
    {
        match = "class_g = 'Code' || class_g = 'code-oss' || class_g = 'jetbrains-idea' || class_g = 'jetbrains-pycharm'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                offset-y = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = "window-height * 0.05";
                    end = 0;
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
            }
        )
    },

    # Refined notifications for Dunst
    {
        match = "class_g = 'Dunst'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                offset-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = "window-width * 0.2";
                    end = 0;
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                offset-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = 0;
                    end = "window-width * 0.15";
                };
            }
        )
    },

    # Quick animations for Jgmenu - no shadows, no corners
    {
        match = "class_g = 'jgmenu'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.12;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.12;
                    start = 0.95;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "linear";
                    duration = 0.08;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
            }
        );
        shadow = false;
        corner-radius = 0;
    },

    # Enhanced scratchpad animations
    {
        match = "class_g = 'scratch'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                offset-y = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = "window-height * -0.2";
                    end = 0;
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                offset-y = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = 0;
                    end = "window-height * -0.15";
                };
            }
        )
    },

    # File managers smooth animations
    {
        match = "class_g = 'Thunar' || class_g = 'nautilus' || class_g = 'dolphin' || class_g = 'nemo'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.25;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.25;
                    start = 0.92;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.18;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.18;
                    start = 1;
                    end = 0.96;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        )
    },

    # Enhanced animations for EWW widgets
    {
        match = "name ?= '^Eww - '";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.18;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.18;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        )
    },

    # Dialog windows smooth animations
    {
        match = "window_type = 'dialog'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.2;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.15;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        )
    },

    # EWW Top Bar - no animations and no shadows for smooth bar experience
    {
        match = "class_g = 'eww-topbar' || name *= 'eww-topbar' || name = 'Eww - topbar'";
        animations = ();
        opacity = 1.0;
        shadow = false;
        corner-radius = 0;
    },

    # EWW Sidebar - enhanced slide animations with Hyprland feel
    {
        match = "class_g = 'eww-sidebar' || name *= 'eww-sidebar'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.25;
                    start = 0;
                    end = 0.95;
                };
                offset-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.25;
                    start = "window-width * -1";
                    end = 0;
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.2;
                    start = 0.95;
                    end = 0;
                };
                offset-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.2;
                    start = 0;
                    end = "window-width * -0.5";
                };
            }
        );
        opacity = 0.95;
        shadow = false;
        corner-radius = 0;
    },

    # EWW Dashboard - no shadows, no corners, smooth animations
    {
        match = "class_g = 'eww-dashboard' || name *= 'eww-dashboard' || name = 'Eww - dashboard'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        );
        shadow = false;
        corner-radius = 0;
    },

    # EWW Powermenu - no shadows, no corners, smooth animations
    {
        match = "class_g = 'eww-powermenu' || name *= 'eww-powermenu' || name = 'Eww - powermenu'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.18;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.18;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        );
        shadow = false;
        corner-radius = 0;
    },

    # i3 floating windows enhanced animations
    {
        match = "_NET_WM_STATE *= '_NET_WM_STATE_ABOVE'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.2;
                    start = 0.88;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.15;
                    start = 1;
                    end = 0.9;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        )
    },

    # Splash screens quick fade
    {
        match = "window_type = 'splash'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 0.6, 1)";
                    duration = 0.15;
                    start = 0;
                    end = "window-raw-opacity";
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 0.6, 1)";
                    duration = 0.12;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
            }
        )
    },

    # Picture-in-picture and small utility windows
    {
        match = "class_g = 'Peek' || class_g = 'SimpleScreenRecorder' || class_g = 'obs' || name *= 'Picture-in-Picture'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.18;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.25, 0.46, 0.45, 0.94)";
                    duration = 0.18;
                    start = 0.85;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.55, 0.06, 0.68, 0.19)";
                    duration = 0.15;
                    start = 1;
                    end = 0.9;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        )
    },

    # System monitors and resource viewers
    {
        match = "class_g = 'Htop' || class_g = 'Btop' || class_g = 'System-monitor' || class_g = 'gnome-system-monitor'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 0.2, 1)";
                    duration = 0.2;
                    start = 0;
                    end = "window-raw-opacity";
                };
                offset-y = {
                    curve = "cubic-bezier(0.4, 0, 0.2, 1)";
                    duration = 0.2;
                    start = "window-height * 0.08";
                    end = 0;
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.4, 0, 1, 1)";
                    duration = 0.15;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                offset-y = {
                    curve = "cubic-bezier(0.4, 0, 1, 1)";
                    duration = 0.15;
                    start = 0;
                    end = "window-height * 0.05";
                };
            }
        )
    },

    # Calculator and simple utility apps
    {
        match = "class_g = 'Gnome-calculator' || class_g = 'galculator' || class_g = 'qalculate-gtk'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.15;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.15;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.1;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.1;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        );
        shadow = false;
        corner-radius = 0;
    },

    # Network Manager and system applets - no shadows, no corners
    {
        match = "class_g = 'Nm-applet' || class_g = 'nm-applet' || class_g = 'NetworkManager' || class_g = 'blueman-manager' || class_g = 'Pavucontrol' || class_g = 'Arandr' || class_g = 'redshift-gtk' || class_g = 'Redshift-gtk'";
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.15;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.15;
                    start = 0.9;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.1;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
                scale-x = {
                    curve = "cubic-bezier(0.7, 0, 0.84, 0)";
                    duration = 0.1;
                    start = 1;
                    end = 0.95;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            }
        );
        shadow = false;
        corner-radius = 0;
    },

    # System tray popup menus and context menus - no shadows, no corners
    {
        match = "window_type = 'popup_menu' || window_type = 'dropdown_menu' || window_type = 'combo' || window_type = 'menu'";
        shadow = false;
        corner-radius = 0;
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.1;
                    start = 0;
                    end = "window-raw-opacity";
                };
                scale-x = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.1;
                    start = 0.95;
                    end = 1;
                };
                scale-y = "scale-x";
                offset-x = "(1 - scale-x) / 2 * window-width";
                offset-y = "(1 - scale-y) / 2 * window-height";
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "linear";
                    duration = 0.08;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
            }
        );
    },

    # All tray icon related popups - comprehensive coverage
    {
        match = "class_g ?= 'Tray' || name ?= 'tray' || name ?= 'menu' || name ?= 'popup' || name ?= 'dropdown'";
        shadow = false;
        corner-radius = 0;
        animations = (
            {
                triggers = ["open", "show"];
                opacity = {
                    curve = "cubic-bezier(0.16, 1, 0.3, 1)";
                    duration = 0.1;
                    start = 0;
                    end = "window-raw-opacity";
                };
            },
            {
                triggers = ["close", "hide"];
                opacity = {
                    curve = "linear";
                    duration = 0.08;
                    start = "window-raw-opacity-before";
                    end = 0;
                };
            }
        );
    }
)
