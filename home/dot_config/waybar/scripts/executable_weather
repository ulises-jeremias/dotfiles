#!/usr/bin/env bash

## Copyright (C) 2019-2025 Ulises Jeremias Cornejo Fandos
## Licensed under MIT.
##
## Waybar Weather Script
## Returns current weather information with icon and temperature

# Check if dots-weather-info command exists
if ! command -v dots-weather-info &>/dev/null; then
  echo ""
  exit 0
fi

# Get weather information
weather_temp=$(dots-weather-info --temp 2>/dev/null)
weather_icon=$(dots-weather-info --icon 2>/dev/null)

# Return empty if weather info is not available
if [[ -z ${weather_temp} ]] || [[ -z ${weather_icon} ]]; then
  echo ""
  exit 0
fi

# Format output for Waybar (no color codes needed, CSS handles that)
echo "${weather_icon} ${weather_temp}"
