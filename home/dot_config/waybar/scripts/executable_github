#!/usr/bin/env bash

## Copyright (C) 2019-2025 Ulises Jeremias Cornejo Fandos
## Licensed under MIT.
##
## Waybar GitHub Notifications Script
## Returns count of unread GitHub notifications

# Check if gh CLI is installed
if ! command -v gh &> /dev/null; then
  echo "0"
  exit 0
fi

# Check if authenticated
if ! gh auth status &> /dev/null; then
  echo "0"
  exit 0
fi

# Get notification count
count=$(gh api notifications --jq 'length' 2>/dev/null || echo "0")

# Return count
if [[ "${count}" -gt 0 ]]; then
  echo "${count}"
else
  echo "0"
fi
