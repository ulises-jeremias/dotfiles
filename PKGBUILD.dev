# Maintainer: Ulises Jeremias Cornejo Fandos <ulisescf.24@gmail.com>

pkgname=dots-git
pkgver=1.2.2
pkgrel=1
pkgdesc="Dotfiles generator that allows quick configuration and managing of different tools and window managers in multiple OSs"
arch=(any)
url="https://github.com/ulises-jeremias/dotfiles"
license=('MIT')
depends=(git chezmoi)
optdepends=()
provides=(dots)
conflicts=(dots)
source=("git+$url.git")
md5sums=('SKIP')

pkgver() {
	cd dotfiles
	git describe --tags "$(git rev-list --tags --max-count=1)" | sed 's/^v//;s/\([^-]*-g\)/r\1/;s/-/./g'
}

package() {
	if [[ ! -d "${HOME}/.local/share/chezmoi" ]]; then
		cp -rf ./dotfiles ~/.local/share/chezmoi
	fi

	chezmoi init --apply --verbose --force --source ~/.local/share/chezmoi
}
